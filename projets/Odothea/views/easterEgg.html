<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            cursor: none !important;
        }

        body {
            margin: 0;
        }

        #svg-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-color: black;
        }

        .star {
            fill: white;
            r: 1;
            transition: r 0.2s;
        }
    </style>
    <title>Image qui suit la souris et les touches du clavier</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<nav class="navbar navbar-expand-lg bg-body-tertiary bg-light" data-bs-theme="light">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-target="#pauseModalToggle" data-bs-toggle="modal">Pause </a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<body class="bg-light" style="height:100vh;">
<main>
    <div class="modal fade" id="pauseModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
         tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0" id="4" style="background:linear-gradient(to bottom,#b597db,#726cb4)">
                <div class="modal-header border-0">
                    <h1 class="modal-title fs-5" id="pauseModalToggleLable">Pause Menu</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-content">
                        <button class="btn btn-primary border-0" data-bs-target="#" data-bs-toggle="modal"
                                style="background-color: white; color: sienna; font-weight: bold">Continuer
                        </button>
                    </div>
                    <div class="modal-content">
                        <button class="btn btn-primary border-0" data-bs-target="#parametreModalToggle"
                                data-bs-toggle="modal"
                                style="background-color: white; color: sienna; font-weight: bold">Options
                        </button>
                    </div>
                    <a href="index.html"><div class="modal-content">
                        <button class="btn btn-primary border-0" data-bs-target="#" data-bs-toggle="modal"
                                style="background-color: white; color: sienna; font-weight: bold">Page accueil
                        </button>
                    </div></a>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-primary border-0" data-bs-target="#pause2ModalToggle" data-bs-toggle="modal"
                            style="background-color: white; color: sienna; font-weight: bold">Page suivante
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="parametreModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
         tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" id="3" style="background:linear-gradient(to bottom,#b597db,#726cb4)">
                <div class="modal-header border-0">
                    <h1 class="modal-title fs-5" id="parametreModalToggleLabel">ParamÃ¨tres</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body justify-content-between d-flex flex-column align-items-center justify-content-center">
                    <div class="form-check form-switch d-flex justify-content-between" style="width:10rem">
                        <input class="form-check-input" type="checkbox" id="darkModeSwitch">
                        <label class="form-check-label" for="darkModeSwitch">Dark Mode</label>
                    </div>
                    <div class="form-check d-flex justify-content-between" style="width:10rem">
                        <input class="form-check-input" type="checkbox" value="" id="protanopia">
                        <label class="form-check-label" for="protanopia">
                            Protanopie
                        </label>
                    </div>
                    <div class="form-check d-flex justify-content-between" style="width:10rem">
                        <input class="form-check-input" type="checkbox" value="" id="deuteranopia">
                        <label class="form-check-label" for="deuteranopia">
                            Deuteranopie
                        </label>
                    </div>
                    <div class="form-check d-flex justify-content-between" style="width:10rem">
                        <input class="form-check-input" type="checkbox" value="" id="noir et blanc">
                        <label class="form-check-label" for="noir et blanc">
                            Noir et blanc
                        </label>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-primary border-0" data-bs-target="#pauseModalToggle" data-bs-toggle="modal"
                            style="background-color: white; color: sienna; font-weight: bold">Retour
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="pause2ModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
         tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" id="1" style="background:linear-gradient(to bottom,#b597db,#726cb4)">
                <div class="modal-header border-0">
                    <h1 class="modal-title fs-5" id="pause2ModalToggleLable">Pause Menu</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-content">
                        <button class="btn btn-primary border-0" data-bs-target="#nousModalToggle" data-bs-toggle="modal"
                                style="background-color: white; color: sienna; font-weight: bold">A propos de nous !
                        </button>
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button class="btn btn-primary border-0" data-bs-target="#pauseModalToggle" data-bs-toggle="modal"
                            style="background-color: white; color: sienna; font-weight: bold">Retour
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="nousModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
         tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" id="2" style="background:linear-gradient(to bottom,#b597db,#726cb4)">
                <div class="modal-header border-0">
                    <h1 class="modal-title fs-5" id="nousModalToggleLable">Pause Menu</h1>
                    <button type="button" class="btn-close" data-bs-target="#pause2ModalToggle" data-bs-toggle="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    WEB WANDERERS !!!
                </div>
                <div class="modal-footer border-0">
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content border-0">
                <div class="modal-body text-white fs-5">
                    <div id="myDiv"></div>
                </div>
            </div>
        </div>
    </div>
</main>
<div id="svg-container">
    <svg id="svg-image" width="100%" height="100%">
        <defs>
            <pattern id="imagePattern" x="0" y="0" width="1" height="1">
                <image id="followingImage" href="../ressources/images/fusee.png" width="100" height="100" />
            </pattern>
        </defs>

        <rect id="backgroundRect" width="100%" height="100%" fill="url(#imagePattern)" />

        <g id="starsContainer"></g>
    </svg>
</div>

<script>
    const backgroundRect = document.getElementById('backgroundRect');
    const followingImage = document.getElementById('followingImage');
    const starsContainer = document.getElementById('starsContainer');

    backgroundRect.addEventListener('mousemove', updateImagePosition);

    document.addEventListener('keydown', handleKeyboardInput);

    function updateImagePosition(event) {
        const mouseX = event.clientX;
        const mouseY = event.clientY;

        followingImage.setAttribute('x', mouseX - backgroundRect.getBoundingClientRect().left - followingImage.width.baseVal.value / 2);
        followingImage.setAttribute('y', mouseY - backgroundRect.getBoundingClientRect().top - followingImage.height.baseVal.value / 2);

        generateStar(mouseX, mouseY);
    }

    function handleKeyboardInput(event) {
        const step = 10;

        let imageX = parseInt(followingImage.getAttribute('x')) || 0;
        let imageY = parseInt(followingImage.getAttribute('y')) || 0;

        switch (event.key) {
            case 'ArrowUp':
                imageY -= step;
                break;
            case 'ArrowDown':
                imageY += step;
                break;
            case 'ArrowLeft':
                imageX -= step;
                break;
            case 'ArrowRight':
                imageX += step;
                break;
        }

        followingImage.setAttribute('x', imageX);
        followingImage.setAttribute('y', imageY);
        generateStar(imageX, imageY);
    }

    function generateStar(x, y) {
        const star = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        star.classList.add('star');
        star.setAttribute('cx', x);
        star.setAttribute('cy', y);
        starsContainer.appendChild(star);

        setTimeout(() => {
            star.setAttribute('r', Math.random() * 2 + 1); // rayon aléatoire entre 1 et 3
        }, 10);

        setTimeout(() => {
            starsContainer.removeChild(star);
        }, 1500);
    }
</script>

<script src="../scripts/darkMode.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>
</html>
